{% extends 'base.html' %}

{% block title %}Detalle de Solicitud - SENA APP{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/" class="back-link">Inicio</a></li>
            <li class="breadcrumb-item"><a href="{% url 'admisiones:panel_coordinador' %}" class="back-link">Lista de Aspirantes</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ solicitud.nombre_completo }}</li>
        </ol>
    </nav>

    <div class="details-card">
        <div class="details-card-header">
            <h2>Detalle de Solicitud</h2>
        </div>

        <div class="details-card-body d-flex justify-content-between">
            <!-- Sección izquierda: información personal -->
            <div class="info-section">
                <div class="profile-avatar">
                    {{ solicitud.nombre_completo|slice:":1" }}
                </div>
                <h4>{{ solicitud.nombre_completo }}</h4>

                <div class="info-group">
                    <h5>Información Personal</h5>
                    <p><strong>Documento:</strong> {{ solicitud.numero_documento }}</p>
                    <p><strong>Correo:</strong> {{ solicitud.correo }}</p>
                    <p><strong>Teléfono:</strong> {{ solicitud.telefono }}</p>
                    <p><strong>Programa:</strong> {{ solicitud.programa }}</p>
                </div>
            </div>

            <!-- Sección derecha: documentos -->
            <div class="documents-section">
                <h5>Documentos</h5>
                <p>
                    Documento Identidad: 
                    {% if solicitud.documento_identidad %}
                        <a href="{{ solicitud.documento_identidad.url }}" target="_blank">Ver Documento</a>
                    {% else %}
                        <span class="text-muted">No adjuntado</span>
                    {% endif %}
                </p>
                <p>
                    Certificado Académico: 
                    {% if solicitud.certificado_academico %}
                        <a href="{{ solicitud.certificado_academico.url }}" target="_blank">Ver Certificado</a>
                    {% else %}
                        <span class="text-muted">No adjuntado</span>
                    {% endif %}
                </p>
                <p>
                    Certificado EPS: 
                    {% if solicitud.certificado_eps %}
                        <a href="{{ solicitud.certificado_eps.url }}" target="_blank">Ver Certificado</a>
                    {% else %}
                        <span class="text-muted">No adjuntado</span>
                    {% endif %}
                </p>

                <!-- Estado -->
                <form method="POST">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="estado">Estado</label>
                        <select name="estado" class="form-control">
                            {% for key, value in solicitud.ESTADO_CHOICES %}
                                <option value="{{ key }}" {% if solicitud.estado == key %}selected{% endif %}>{{ value }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mt-2 d-flex gap-2">
                        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}